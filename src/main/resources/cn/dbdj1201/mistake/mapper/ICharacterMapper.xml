<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.dbdj1201.mistake.mapper.ICharacterMapper">

    <resultMap id="characterMap" type="character">
        <id property="id" column="cid"/>
        <result property="name" column="name"/>
        <result property="info" column="info"/>

        <collection property="novels" ofType="novel">
            <id property="id" column="id"/>
            <result property="nid" column="nid"/>
            <result property="novelName" column="novelName"/>
        </collection>

        <!--        <association property="novelist" column="nid" javaType="novelist">-->
        <!--            <id property="nid" column="nid"/>-->
        <!--            <result property="nname" column="nname"/>-->
        <!--            <result property="lifetime" column="lifetime"/>-->
        <!--            <result property="novel" column="novel"/>-->
        <!--            <result property="address" column="address"/>-->
        <!--        </association>-->
    </resultMap>

    <!--查询所有-->
    <select id="findAll" resultMap="characterMap">
SELECT  t.name, t.`info`,n.novelName FROM tab_character t LEFT JOIN novel_character n1 ON t.cid = n1.cid  LEFT JOIN novel n ON n1.nid = n.`id`;
    </select>

    <!--    <select id="findAllNovelNovelist" resultType="novelNovelist">-->
    <!--            select n1.*, n2.nname, n2.address from novel n1 , novelist n2 where n1.nid = n2.nid-->
    <!--        </select>-->

</mapper>